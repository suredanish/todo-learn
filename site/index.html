<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main>
        <div class="login-form">
            <h2>Login In</h2>
            <label>Username<input type="text" id="username"></label>
            <label>Password<input type="password" id="password"></label>
            <button id="login-button">Login</button>
        </div>
    </main>
</body>
<script>
    async function main() {
        var loginButton = document.getElementById('login-button')
        loginButton.addEventListener('click', async (e) => {
            const username = document.getElementById('username').value
            const password = document.getElementById('password').value
            const response = await sendCredentails({username, password})
            if(response.status != 200) { return alert("something went wrong") }

            var token = await response.text()
            document.cookie = `token=${token}; expires=${new Date(new Date().setMonth(new Date().getMonth() + 1)).toUTCString()}; path=/`;
        })
        const sendCredentails = async (cred)=> {
            var response = await fetch('http://localhost:1212/login', {
                method: 'POST',
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(cred)
            })
            return response
        }
    }
    main()

</script>
</html>